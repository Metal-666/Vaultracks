<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/styles.min.css" />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script>
      /* https://stackoverflow.com/a/64158043/13027370 */
      /* to prevent Firefox FOUC, this must be here */
      let FF_FOUC_FIX;
    </script>
  </head>

  <body
    class="mocha m-0 flex size-full content-center justify-center bg-gradient-to-br from-surface0 to-crust p-0 font-mono text-text"
  >
    <div
      x-data
      class="m-3 flex w-full flex-col self-center rounded-md border-2 border-mauve/25 bg-crust/5 p-5 shadow-md shadow-mauve/5 backdrop-blur-md shadow-y-0 shadow-blur-10 shadow-spread-4 md:w-1/2 md:max-w-prose"
    >
      <div class="flex flex-col">
        <label>Enter database key:</label>
        <input
          x-ref="databaseKeyInput"
          type="text"
          class="center my-2 border-0 bg-crust/50 p-1 outline-none"
        />
      </div>
      <button
        x-cloak
        x-on:click="submitKey($refs.databaseKeyInput.text)"
        class="rounded-md bg-gradient-to-r from-mauve/75 to-lavender/75 text-base backdrop-blur-md [&[x-cloak]]:hidden"
      >
        Initialize
      </button>
      <script>
        /**
         * @param {string} key
         */
        function submitKey(key) {
          fetch(
            `/api/initializeDatabase?${new URLSearchParams({ key: key })}`,
            {
              method: "POST",
            },
          );
        }
      </script>
    </div>
  </body>
</html>
